<!DOCTYPE html>
<html>
<head>
    <script src="/drapo.js"></script>
    <title>Function - UnloadData</title>
</head>
<body>
    <section>
        <h1>UnloadData() inside a d-dataOnNotify</h1>
        <div d-dataKey="notifiesCount" d-dataType="value" d-dataValue="0"></div>
        <div d-dataKey="dataReloadTrigger" d-dataType="value" d-dataOnNotify="UnloadData(data);UpdateData(notifiesCount,Cast({{notifiesCount}}+1,number));IF({{data}}=,,)"></div>
        <div d-dataKey="data" d-dataUrlGet="~/Data?dummyParam={{dataReloadTrigger}}"></div>
        <div>
            <p>Number of notifies trigered: <span d-model="{{notifiesCount}}"></span></p>
            <ul>
                <li d-for="item in data">{{item.Key}} - {{item.Value}}</li>
            </ul>
        </div>
        <br />
        <input type="button" value="Reload Data" driverunittest="click" d-on-click="UnloadData(dataReloadTrigger);UpdateData(dataReloadTrigger,0)" />
    </section>
</body>
</html>